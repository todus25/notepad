define("modules/event_brokering",["require","exports","module"],function(e,t,n){n.exports={listenFor:function(e,t){var n=[],r=this;return this.listenTo(e,t,function(){var e=arguments;n.forEach(function(t){t.apply(r,e)})}),{bubbleUp:function(){return n.push(function(){this.trigger.bind(this,t).apply(this,arguments)}),this},bubbleUpAs:function(e){return n.push(function(){this.trigger.bind(this,e).apply(this,arguments)}),this},and:function(e){return n.push(e),this}}}}}),define("controllers/controller",["require","exports","module","backbone","underscore","modules/event_brokering"],function(e,t,n){function o(){this.initialize.apply(this,arguments)}var r=e("backbone"),i=e("underscore"),s=e("modules/event_brokering");o.extend=r.View.extend,o.prototype={},i.extend(o.prototype,r.Events),i.extend(o.prototype,s),n.exports=o}),define("views/view",["require","exports","module","jquery","backbone","modules/event_brokering","underscore"],function(e,t,n){var r=e("jquery"),i=e("backbone"),s=e("modules/event_brokering"),o=e("underscore"),u=i.View.extend({initialize:function(){this.subviews!==undefined&&this.defineSubviews(this.subviews)},isVisible:function(){return this.$el.is(":visible")},_subviews:{},_subviewClasses:{},setSubview:function(e,t){return this._subviews[e]=this[e]=t},setSubviewClass:function(e,t){this._subviewClasses[e]=t},defineSubviews:function(e){o.each(e,function(e,t){this.setSubviewClass(t,e)},this)},getSubview:function(e){return this._subviews&&this._subviews[e]},getSubviewClass:function(e){return this._subviewClasses&&this._subviewClasses[e]},renderSubviews:function(e){o.each(e,function(e,t){this.renderSubview(t,e)},this)},renderSubview:function(e,t){t=t||{},this.ensureSubviewDestroyed(e);var n=this.getSubviewClass(e),r=this.setSubview(e,new n(t));return r.render(t),r},destroySubview:function(e){var t=this.getSubview(e);this.stopListening(t),t.$el.off().empty(),t.destroyAllSubviews(),r.cleanData(t.$el),this.setSubview(e,null)},destroyAllSubviews:function(){o(this._subviews).each(function(e,t){this.destroySubview(t)},this),this._subviews={}},ensureSubviewDestroyed:function(e){this.getSubview(e)&&this.destroySubview(e)}});n.exports=u,r.extend(n.exports.prototype,s)}),function(e){e.fn.insideOf=function(t){var n=this[0];return n.parentNode?n==t?!0:e(n.parentNode).insideOf(t):!1}}(jQuery),define("plugins/jquery.insideof",function(){}),define("widgets/modal/view",["require","exports","module","underscore","jquery","views/view","libs/utils","plugins/jquery.insideof"],function(e,t,n){var r=e("underscore"),i=e("jquery"),s=e("views/view"),o=e("libs/utils");e("plugins/jquery.insideof"),n.exports=s.extend({events:{"click .js-close-modal":"close"},initialize:function(e){this.close()},open:function(){this.$el.show(),r.defer(function(){i("#modal").attr("state","open"),this._bindEscapeMethods()}.bind(this))},close:function(){i("#modal").removeAttr("state"),i(document).off("keydown.modal").off("click.modal"),setTimeout(this._finishClose.bind(this),150)},_finishClose:function(){this.$el.hide(),this.trigger("close")},_bindEscapeMethods:function(){i(document).on("keydown.modal",function(e){e.which==27&&this.close()}.bind(this)),i(document).on("click.modal",function(e){!i(e.target).insideOf(this.el)&&e.target.className!="search-result"&&e.target.tagName!="LI"&&this.close()}.bind(this))}})}),define("libs/statsd",["require","exports","module"],function(e,t,n){var r="/stats/v1/batch",i=function(e){e=e||{},this.FLUSH_INTERVAL=(e.flushInterval||10)*1e3,this.QUEUE_LIMIT=e.queueLimit||10,this.flushUrl=e.flushUrl,this._statsdQueue=[],this._beforeUnloadQueue={},this._flushTimeout=null,e.stopped||this._startIntervalFlush(),this._registerBeforeUnload()};(function(){this._preparedData=function(){return{data:this._statsdQueue}},this._flush=function(){var e=new window.XMLHttpRequest;e.open("POST",this.flushUrl,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.send(JSON.stringify(this._preparedData())),this._statsdQueue=[]},this._flushIfNecessary=function(){this._statsdQueue.length>0&&this._flush()},this._flushBeforeOnload=function(){for(var e in this._beforeUnloadQueue)this._beforeUnloadQueue[e]();this._flushIfNecessary()},this._record=function(e,t,n,r){var i={name:e,payload:{measurement:t,action:n}};r!=null&&(i.payload.value=r),this._statsdQueue.push(i),setTimeout(this._flushIfOverflow.bind(this),0)},this._flushIfOverflow=function(){if(this._statsdQueue.length>=this.QUEUE_LIMIT){var e=!1;this._flushTimeout!==null&&(this._stopIntervalFlush(),e=!0),this._flush(),e&&this._startIntervalFlush()}},this._stopIntervalFlush=function(){clearTimeout(this._flushTimeout),this._flushTimeout=null},this._startIntervalFlush=function(){this._flushIfNecessary(),this._flushTimeout=setTimeout(this._startIntervalFlush.bind(this),this.FLUSH_INTERVAL)},this._registerBeforeUnload=function(){window.addEventListener("beforeunload",this._flushBeforeOnload.bind(this),!1)},this.increment=function(e,t){this._record(e,t,"increment",null)},this.decrement=function(e,t){this._record(e,t,"decrement",null)},this.gauge=function(e,t,n){this._record(e,t,"gauge",n)},this.timing=function(e,t,n){this._record(e,t,"timing",n)},this.set=function(e,t,n){this._record(e,t,"set",n)},this.registerUnloadAction=function(e,t){this._beforeUnloadQueue[e]=t}}).call(i.prototype),n.exports=new i({flushUrl:r})}),define("libs/recaptcha",["require","exports","module","libs/statsd"],function(e,t,n){var r=e("libs/statsd");n.exports={verified:!1,render:function(e){if(e&&!e.querySelector(".js-sign-up-captcha"))return;e||(e=document.querySelector("body"));var t=0,n=setInterval(function(){var i=e.querySelector(".js-sign-up-captcha");if(window.grecaptcha&&i)clearInterval(n),grecaptcha.render(i,{sitekey:"6LeYzQcTAAAAAAqXDQ36Gcb2JKhONzxPRfDOiLE7",callback:function(e){e&&(this.verified=!0)}.bind(this)}),r.increment("recaptcha.render.success");else if(t>30){clearInterval(n);var s=window.grecaptcha?".js-sign-up-captcha does not exist":"grecaptcha not defined";setTimeout(function(){throw new Error("Recaptcha render failed; "+s)},1),r.increment("recaptcha.render.failure")}else t++}.bind(this),500)}}}),define("widgets/modal/modal",["require","exports","module","jquery","controllers/controller","widgets/modal/view","libs/recaptcha"],function(e,t,n){var r=e("jquery"),i=e("controllers/controller"),s=e("widgets/modal/view"),o=e("libs/recaptcha");n.exports=i.extend({initialize:function(e){var t;if(e.template!==undefined){var n=utils.template(e.template);t=r(n(e.renderOpts)),r("#modal").append(t)}else{if(e.el===undefined)throw new Error("Modal widget: either an el or template is required.");t=e.el}this.el=t,this.view=new s({el:t}),r(e.openerSelector).click(function(e){e.preventDefault(),this.open()}.bind(this)),r(e.closerSelector).click(function(e){e.preventDefault(),this.close()}.bind(this)),this.trigger("ready")},open:function(){this.view.open(),o.render(document.querySelector(this.el))},close:function(){this.view.close()}})}),define("controllers/registration_modal_controller",["require","exports","module","controllers/controller","widgets/modal/modal","jquery"],function(e,t){var n=e("controllers/controller"),r=e("widgets/modal/modal"),i=e("jquery"),s=n.extend({initialize:function(e){new r({el:"#registration-modal",openerSelector:".js-sign-up"})}});t.init=function(){new s(CCDATA.teacherSignUp)}})
;
